# üß™ Lab Notes ‚Äì Web Application Vulnerabilities and Remediation Techniques

## üìù Overview

This document contains my technical notes and reflections from **Lab 1 ‚Äì Web Application Vulnerabilities and Remediation Techniques**, where I acted as a **Security Analyst** to identify and remediate a **Cross-Site Scripting (XSS)** vulnerability in a Python Flask web application deployed on **Google Cloud Platform (GCP)**.

The main goal of this lab was to simulate the workflow of a security professional ‚Äî from deploying a vulnerable application, scanning for vulnerabilities, and validating findings, to remediating the issues and re-scanning to ensure the fix was successful.

---

## üß† What I Learned

Through this lab, I gained practical experience in scanning for application vulnerabilities. I learned the importance of a security analyst's ability to scan for application vulnerabilities, which is essential for helping identify and address potential weaknesses, managing risks, meeting compliance requirements, and ultimately maintaining a robust security posture to protect an organization‚Äôs assets and reputation.

By closing security gaps and addressing weaknesses, you can help prevent potential exploitation, minimize the impact of security incidents, and maintain compliance with industry regulations.

In this lab, I completed one of the fundamental aspects of proactive cybersecurity strategies.

---

## üîß Step-by-Step Technical Process

### 1. Launching a Virtual Machine

- Created a **Compute Engine VM** in GCP with no service account or additional scopes.
- Reserved a **static IP** to ensure the application was reachable externally.
- Installed the required dependencies (`python3-flask`) using a startup script.
- Verified that the VM was up and running.

Key commands:
```bash
gcloud compute instances create xss-lab-vm \
  --machine-type=e2-micro \
  --image-family=debian-11 \
  --image-project=debian-cloud \
  --tags=http-server \
  --metadata=startup-script='apt-get update && apt-get install -y python3-flask'
```

---

### 2. Configuring Firewall and Deploying the Vulnerable App

- Created a **firewall rule** to allow incoming traffic on port `8080` (the port Flask uses by default).
- Connected to the VM using the SSH-in-browser terminal.
- Downloaded the vulnerable Flask app to the VM.
- Extracted the app files and started the Flask server.

Firewall rule creation:
```bash
gcloud compute firewall-rules create allow-http-8080 \
  --allow tcp:8080 \
  --target-tags=http-server
```

Start the Flask app:
```bash
python3 app.py
```

---

### 3. Testing for XSS Vulnerability

- Accessed the application through the browser using the VM‚Äôs external IP and port `8080`.
- Injected a malicious script payload into a form field to test for **Cross-Site Scripting (XSS)**.

Example payload:
```html
<script>alert('This is an XSS Injection to demonstrate one of OWASP vulnerabilities')</script>
```

- The JavaScript `alert()` popup confirmed the app was vulnerable to XSS.

---

### 4. Scanning with Web Security Scanner (WSS)

- Enabled the **Web Security Scanner API** in the Google Cloud Console.
- Created a new scan configuration targeting the app endpoint (e.g., `http://<STATIC_IP>:8080`).
- Launched the scan and monitored the logs via SSH.
- The scan results confirmed the presence of an XSS vulnerability.

Example command to enable API:
```bash
gcloud services enable websecurityscanner.googleapis.com
```

Example command to create a scan config:
```bash
gcloud web-security-scanner scan-configs create \
  --display-name="XSS-Lab-Scan" \
  --starting-urls="http://<STATIC_IP>:8080"
```

Run the scan:
```bash
gcloud web-security-scanner scans run <SCAN_CONFIG_ID>
```

---

### 5. Remediating the Vulnerability

- Edited the `app.py` file to sanitize user input and escape HTML special characters before rendering.
- This ensures malicious code is treated as plain text and not executed by the browser.

Fixed code snippet:
```python
output_string = "".join([html_escape_table.get(c, c) for c in input_string])
# output_string = input_string
```

- Restarted the Flask server after saving the changes.

Restart the app:
```bash
pkill -f app.py
python3 app.py
```

---

### 6. Re-Scanning After the Fix

- Initiated a new scan using Web Security Scanner to verify that the vulnerability had been fixed.
- The re-scan started successfully, but the lab session expired before capturing the final ‚Äúno vulnerabilities‚Äù screen.
- Despite that, the fix was correctly implemented in the application code.

---

## ‚úÖ Key Takeaways

- **XSS (Cross-Site Scripting)** is a common and dangerous web vulnerability that can allow attackers to inject and execute malicious scripts in users‚Äô browsers.
- Automated tools like **Web Security Scanner** are crucial for identifying vulnerabilities early and accurately.
- Implementing **input validation and HTML escaping** is one of the most effective ways to prevent XSS.
- Regular scanning, remediation, and re-validation should be standard practice in any secure development lifecycle.

---

## üìö References

- [OWASP ‚Äì Cross-Site Scripting (XSS)](https://owasp.org/www-community/attacks/xss/)
- [Google Cloud ‚Äì Web Security Scanner](https://cloud.google.com/security-scanner)
